<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Oh My Emacs</title>
<!-- 2014-08-05 Tue 22:50 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="SunWenxiang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Oh My Emacs</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#ome-prerequisites">Prerequisites</a></li>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#learning">Learning Emacs</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#sec-2-3">Package Management</a></li>
<li><a href="#cl-lib">Cl-lib</a></li>
<li><a href="#structure">Structure</a></li>
</ul>
</li>
<li><a href="#implementation">Implementation</a>
<ul>
<li><a href="#sec-3-1">oh-my-emacs basics</a></li>
<li><a href="#core">oh-my-emacs core functions</a></li>
<li><a href="#sec-3-3">Writing Portable Emacs Lisp Configurations</a></li>
</ul>
</li>
<li><a href="#sec-4">Load settings</a>
<ul>
<li><a href="#sec-4-1">Load User/System Specific Files</a></li>
</ul>
</li>
<li><a href="#sec-5">Todo</a>
<ul>
<li><a href="#sec-5-1">Blueprint</a></li>
<li><a href="#sec-5-2">Boot up speed optimization</a></li>
<li><a href="#sec-5-3">El-get</a></li>
</ul>
</li>
</ul>
</div>
</div>
<blockquote>
<p>
Emacs outshines all other editing software in approximately the same
way that the noonday sun does the stars. It is not just bigger and
brighter; it simply makes everything else vanish.
</p>

<p>
&#x2013; Neal Stephenson, "In the Beginning was the Command Line"
</p>
</blockquote>

<div id="outline-container-ome-prerequisites" class="outline-2">
<h2 id="ome-prerequisites"><a id="sec"></a>Prerequisites</h2>
<div class="outline-text-2" id="text-ome-prerequisites">
<p>
This project was born for emacs 24+, emacs 23 is not officially supported and
there's no plan to support it. One of the builtin package of oh-my-emacs, <a href="https://github.com/emacs-helm/helm">helm</a>,
required Emacs version 24.3+, and oh-my-emacs will work best with recent
version emacs.
</p>

<p>
The following software is really basic that almost every el-get package will
need one of them.
</p>

<table id="ome-prerequisites" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Prerequisites for all oh-my-emacs module.</caption>

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">Windows</th>
<th scope="col" class="left">Ubuntu/Debian/Mint</th>
<th scope="col" class="left">ArchLinux</th>
<th scope="col" class="left">Fedora</th>
<th scope="col" class="left">Mac OS X</th>
<th scope="col" class="left">Mandatory?</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><a href="https://www.gnu.org/software/emacs/">emacs 24.3+</a></td>
<td class="left">&#xa0;</td>
<td class="left">emacs24(emacs-snapshot)</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left"><a href="http://savannah.nongnu.org/projects/cvs">cvs</a></td>
<td class="left">&#xa0;</td>
<td class="left">cvs</td>
<td class="left">&#xa0;</td>
<td class="left">cvs</td>
<td class="left">&#xa0;</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left"><a href="http://subversion.apache.org/">subversion</a></td>
<td class="left">&#xa0;</td>
<td class="left">subversion</td>
<td class="left">&#xa0;</td>
<td class="left">subversion</td>
<td class="left">&#xa0;</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left"><a href="http://mercurial.selenic.com/">mercurial</a></td>
<td class="left">&#xa0;</td>
<td class="left">mercurial</td>
<td class="left">&#xa0;</td>
<td class="left">mercurial</td>
<td class="left">&#xa0;</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left"><a href="http://git-scm.com/">git</a></td>
<td class="left">&#xa0;</td>
<td class="left">git</td>
<td class="left">&#xa0;</td>
<td class="left">git</td>
<td class="left">&#xa0;</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left"><a href="http://www.gnu.org/software/make/">make</a></td>
<td class="left">&#xa0;</td>
<td class="left">make</td>
<td class="left">&#xa0;</td>
<td class="left">make</td>
<td class="left">&#xa0;</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left"><a href="http://www.gnu.org/software/texinfo/">texinfo</a></td>
<td class="left">&#xa0;</td>
<td class="left">texinfo</td>
<td class="left">&#xa0;</td>
<td class="left">texinfo</td>
<td class="left">&#xa0;</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left"><a href="http://gcc.gnu.org/">gcc</a></td>
<td class="left">&#xa0;</td>
<td class="left">gcc</td>
<td class="left">&#xa0;</td>
<td class="left">gcc</td>
<td class="left">&#xa0;</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left"><a href="http://www.gnu.org/software/automake/">automake</a></td>
<td class="left">&#xa0;</td>
<td class="left">automake</td>
<td class="left">&#xa0;</td>
<td class="left">automake</td>
<td class="left">&#xa0;</td>
<td class="left">Yes</td>
</tr>

<tr>
<td class="left"><a href="http://www.gnu.org/software/autoconf/">autoconf</a></td>
<td class="left">&#xa0;</td>
<td class="left">autoconf</td>
<td class="left">&#xa0;</td>
<td class="left">autoconf</td>
<td class="left">&#xa0;</td>
<td class="left">Yes</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-introduction" class="outline-2">
<h2 id="introduction"><a id="sec"></a>Introduction</h2>
<div class="outline-text-2" id="text-introduction">
<p>
This dotemacs project aims to provide an out-of-the-box emacs configuration
for writing and programming. It is intended for both beginners and
intermediate users. The name of this project is inspired by <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a>, which is
another out-of-the-box configuration for <a href="http://www.zsh.org/">zsh</a>.
</p>

<p>
The main features of oh-my-emacs are
</p>
<ul class="org-ul">
<li>better default settings
</li>
<li>focus on writing and programming, let emacs do what it really good at
</li>
<li>"literate" customization embedded in Org-mode files
</li>
<li>use el-get to manage packages, which is portable, and version control
friendly
</li>
<li>self-adapting, enable features only when the system meet the requirements
</li>
</ul>

<p>
The latest version is at <a href="https://github.com/xiaohanyu/oh-my-emacs">https://github.com/xiaohanyu/oh-my-emacs</a>.
</p>
</div>

<div id="outline-container-learning" class="outline-3">
<h3 id="learning"><a id="sec"></a>Learning Emacs</h3>
<div class="outline-text-3" id="text-learning">
<blockquote>
<p>
People talk about getting used to a new editor, but over time, it is precisely
the opposite that should happen &#x2014; the editor should get used to us.
</p>

<p>
&#x2013; Vivek Haldar
</p>
</blockquote>

<p>
This project won't teach you anything about how to use emacs or why use
emacs. However, I'll give you some useful resources if you're new to emacs.
</p>

<p>
The first thing you should refer to is the emacs builtin tutorial, type <code>C-h
t</code> to get it within a running emacs.
</p>

<p>
Next, you should refer to some general books to get a full view of emacs,
just search <a href="http://www.amazon.com/">http://www.amazon.com/</a>.
</p>

<p>
Now you should be a intermediate emacs user(or lover, I hope), the final step
is emacs lisp, which is not that easy as it looks like, since it is not easy to
get a full understanding of the so-called lisp. But you can still do something
useful even if you didn't know lisp quite a lot. The builtin <a href="https://www.gnu.org/software/emacs/manual/html_node/eintr/">An Introduction to
Programming in Emacs Lisp</a> is a really good entry point to emacs lisp
programming. You can refer to this tutorial by typing <code>C-h i m Emacs Lisp
Intro</code>.
</p>

<p>
Finally, if you want to do some big jobs in emacs lisp, then there's a long
adventure waiting for you. The builtin <a href="http://www.gnu.org/software/emacs/manual/">GNU Emacs Manual</a> and <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/">GNU Emacs Lisp
Reference Manual</a> is your best friends. Besides these two large books, there're
various good web sites, such as
</p>
<dl class="org-dl">
<dt><a href="http://www.emacswiki.org/">emacswiki</a></dt><dd>the largest unofficial emacs lisp repository
</dd>
<dt><a href="http://wikemacs.org/index.php/Main_Page">wikiemacs</a></dt><dd>a saner and modern wiki for emacs
</dd>
<dt><a href="http://www.masteringemacs.org/">masteringemacs</a></dt><dd>a blog about mastering the world's best text editor
</dd>
<dt><a href="http://emacs-fu.blogspot.com/">emacs-fu</a></dt><dd>useful tricks for emacs
</dd>
<dt><a href="http://alexott.net/en/emacs/">Alexott's Blog</a></dt><dd>some really great articles about emacs
</dd>
<dt><a href="http://alexott.net/en/emacs/">emacser</a></dt><dd>an excellent and comprehensive emacs blog written by Chinese
users.
</dd>
<dt><a href="http://whattheemacsd.com/">whattheemacsd</a></dt><dd>contains some really great tips.
</dd>
</dl>

<p>
Wow, what a long journey, if you're tired, you can <a href="http://emacsrocks.com/">rock with emacs</a>.
</p>
</div>
</div>

<div id="outline-container-installation" class="outline-3">
<h3 id="installation"><a id="sec"></a>Installation</h3>
<div class="outline-text-3" id="text-installation">
<ol class="org-ol">
<li>Install Emacs version 24 or greater.  Use your package manager if
you have one and it has an install candidate for Emacs 24,
otherwise install it directly <a href="http://savannah.gnu.org/projects/emacs/">from source</a>, or Mac binaries may be
downloaded from the <i>nightlies</i> section of
<a href="http://emacsformacosx.com/builds">http://emacsformacosx.com/builds</a>
</li>
<li>Checkout a version of the oh-my-emacs using git &#x2013; if you're new to
git, checkout this <a href="http://www.kernel.org/pub/software/scm/git/docs/gittutorial.html">git-tutorial</a>.
</li>
</ol>
<div class="org-src-container">

<pre class="src src-sh">git clone http://github.com/xiaohanyu/oh-my-emacs.git
</pre>
</div>
<ol class="org-ol">
<li>Move the resulting directory to <code>~/.emacs.d</code> <sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>
</li>
<li>Launch Emacs!
</li>
</ol>
</div>
</div>


<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">Package Management</h3>
<div class="outline-text-3" id="text-2-3">
<blockquote>
<p>
Let's face it &#x2013; although a vanilla Emacs installation is quite powerful almost
nobody is using Emacs without a pile of add-ons. And managing those add-ons is
quite frankly a pain in the ass. Traditional options included installing Emacs
add-ons via the operating system's package manager (if available), downloading
.el files from various locations (everybody hates packages distributed only on
Emacs Wiki with no canonical version control repo) and simply sticking them on
the load-path, etc. It's more than obvious that such solutions are less than
ideal.
</p>

<p>
For instance if you're installing Emacs add-ons via a package manager and you
have to change OSes (or machines) you're mostly fucked. On the other hand
piling files manually in .emacs.d is equal to hell in the version and
dependency tracking department. There has to be a better way, right? Wouldn't
it be nice if Emacs had its own package manager similar to the likes of
homebrew, apt or yum?
</p>

<p>
Emacs 24 finally introduces such a tool &#x2013; its name is package.el (very
original, right?) and it's promise is to make your lives a bit easier. Does it
manage to deliver on that promise? We'll see that in a bit&#x2026;
</p>

<p>
&#x2013; <a href="http://batsov.com/articles/2012/02/19/package-management-in-emacs-the-good-the-bad-and-the-ugly/">Package Management in Emacs: The Good, the Bad and the Ugly</a>
</p>
</blockquote>

<p>
Ah, a long long quote, really vivid and visual description of the state of
emacs package management system. <a href="https://github.com/xiaohanyu/oh-my-emacs">oh-my-emacs</a> adopt <a href="https://github.com/dimitri/el-get">el-get</a>, while other popular
dotemacs project adopt the builtin <code>package.el</code>. You may wonder why, IMHO,
<code>package.el</code> is far from ideal, although it is builtin with emacs, however,
el-get is the practical solution, at least for now. In a word, what el-get
to emacs is what <code>apt-get</code> to debian/ubuntu.
</p>

<p>
So the very first thing oh-my-emacs do to your emacs is to install <code>el-get</code>,
this is done by putting the following code snippet in <code>$HOME/.emacs.d/init.el</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp" id="ome-install-el-get">(add-to-list 'load-path <span style="color: #8abeb7;">"~/.emacs.d/el-get/el-get"</span>)

(<span style="color: #b5bd68;">unless</span> (<span style="color: #b5bd68;">require</span> '<span style="color: #81a2be;">el-get</span> nil 'noerror)
  (<span style="color: #b5bd68;">with-current-buffer</span>
      (url-retrieve-synchronously
       <span style="color: #8abeb7;">"https://raw.github.com/dimitri/el-get/master/el-get-install.el"</span>)
    (<span style="color: #b5bd68;">let</span> (el-get-master-branch
          <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">do not build recipes from emacswiki due to poor quality and</span>
          <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">documentation</span>
          el-get-install-skip-emacswiki-recipes)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">build melpa packages for el-get</span>
  (el-get-install 'package)
  (setq package-archives '((<span style="color: #8abeb7;">"gnu"</span> . <span style="color: #8abeb7;">"http://elpa.gnu.org/packages/"</span>)
                           (<span style="color: #8abeb7;">"melpa"</span> . <span style="color: #8abeb7;">"http://melpa.milkbox.net/packages/"</span>)))
  (el-get-elpa-build-local-recipes))

(add-to-list 'el-get-recipe-path <span style="color: #8abeb7;">"~/.emacs.d/ome-el-get-recipes"</span>)

<span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">(el-get 'sync)</span>
</pre>
</div>

<p>
Note that by default, el-get support multiple method to install emacs packages
from various sources, such as elpa, emacswiki, etc. However, IMHO, most of the
emacswiki packages have a poor quality and documentation. So I disable it by
default.
</p>

<p>
By default, el-get bundles with about 1000 packages. Combined with elpa,
there're about 3000 packages. However, many of them are outdated, unmaintained,
lack of documentation. For elpa package archive, there are multiple choices,
namely the official GNU <a href="http://elpa.gnu.org/">elpa</a>, <a href="http://marmalade-repo.org/">marmalade</a> and <a href="http://melpa.milkbox.net/">melpa</a>, etc. <a href="http://elpa.gnu.org/">elpa</a> is just too stable
which update just too little, and packages in <a href="http://marmalade-repo.org/">marmalade</a> is a little outdated
since it requires authors of packages to upload their package each time a
new version is released. <a href="http://melpa.milkbox.net/">melpa</a>, similar to el-get, however, it builds packages
directly from package's source repository. To tell the truth, melpa is really
quite a good alternative to el-get. Compared to el-get, there's no need to
install <code>git</code>, <code>cvs</code>, <code>svn</code>, etc. You have <code>package.el</code>, then you can use
melpa. However, if you want better integration between your emacs packages with
your system, just use el-get. For technical details, check <a href="https://github.com/milkypostman/melpa/issues/742">here</a>.
</p>

<p>
Oh-my-emacs adopt el-get, while enabled only the official elpa and melpa repo
for <code>package.el</code>, it also <code>(el-get-elpa-build-local-recipes)</code> when el-get is
first installed, so you can install melpa package directly via el-get.
</p>

<p>
And in the following journey, you may find the great power <code>el-get</code> provides
for you &#x2013; which makes it possible to store just dotemacs configuration, no
need to things like <code>git submodule</code>. Thank you, <a href="http://tapoueh.org/">Dimitri Fontaine</a>.
</p>
</div>
</div>

<div id="outline-container-cl-lib" class="outline-3">
<h3 id="cl-lib"><a id="sec"></a>Cl-lib</h3>
<div class="outline-text-3" id="text-cl-lib">
<p>
<a href="http://www.gnu.org/software/emacs/news/NEWS.24.3">Emacs 24.3</a> renamed the Common Lisp emulation package from <code>cl</code> to <code>cl-lib</code>,
which causes some madness between different Emacs versions. The following hack
code has been tested on Emacs 24.2.1 and Emacs 24.3.50. Any bug report will be
appreciated.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp" id="cl-lib">(<span style="color: #b5bd68;">when</span> (version&lt; emacs-version <span style="color: #8abeb7;">"24.3"</span>)
  (el-get 'sync '(cl-lib))
  (add-to-list 'load-path <span style="color: #8abeb7;">"~/.emacs.d/el-get/cl-lib"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-structure" class="outline-3">
<h3 id="structure"><a id="sec"></a>Structure</h3>
<div class="outline-text-3" id="text-structure">
<p>
The <code>init.el</code> file is where everything begins. It is loaded
automatically by Emacs on startup, its sole purpose is to load the
elisp code embedded in this file.
</p>
</div>
</div>
</div>

<div id="outline-container-implementation" class="outline-2">
<h2 id="implementation"><a id="sec"></a>Implementation</h2>
<div class="outline-text-2" id="text-implementation">
</div>

<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">oh-my-emacs basics</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>Functions for loading other parts of oh-my-emacs.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp" id="ome-load">(<span style="color: #b5bd68;">defvar</span> <span style="color: #f0c674;">ome-packages</span> nil
  <span style="color: #b294bb;">"This package contains all packages loaded by oh-my-emacs.</span>

<span style="color: #b294bb;">Acutally, this variable is an alist, whose element is also a</span>
<span style="color: #b294bb;">list. The car of the element is an oh-my-emacs module name, while</span>
<span style="color: #b294bb;">the cdr of the element is a list of el-get packages loaded in particular</span>
<span style="color: #b294bb;">oh-my-emacs module."</span>)

(<span style="color: #b5bd68;">defun</span> <span style="color: #de935f;">ome-load</span> (module <span style="color: #81a2be;">&amp;rest</span> header-or-tags)
  <span style="color: #b294bb;">"Load configuration from other ome-*.org files.</span>
<span style="color: #b294bb;">If the optional argument is the id of a subtree then only</span>
<span style="color: #b294bb;">configuration from within that subtree will be loaded.  If it is</span>
<span style="color: #b294bb;">not an id then it will be interpreted as a tag, and only subtrees</span>
<span style="color: #b294bb;">marked with the given tag will be loaded.</span>

<span style="color: #b294bb;">For example, to load all of ome-lisp.org simply add (ome-load</span>
<span style="color: #b294bb;">\"ome-lisp\") to your configuration.</span>

<span style="color: #b294bb;">To load only the 'window-system' config from ome-miscs.org</span>
<span style="color: #b294bb;">add (ome-load \"ome-miscs.org\" \"window-system\") to your</span>
<span style="color: #b294bb;">configuration.</span>

<span style="color: #b294bb;">The good news is, you can load multiple parts config from one</span>
<span style="color: #b294bb;">single file by simply (ome-load \"ome-module.org\" \"part1\"</span>
<span style="color: #b294bb;">\"part2\")."</span>
  (<span style="color: #b5bd68;">let</span> ((module-name (file-name-base module))
        (file (expand-file-name (<span style="color: #b5bd68;">if</span> (string-match <span style="color: #8abeb7;">"ome-.+\.org"</span> module)
                                    module
                                  (format <span style="color: #8abeb7;">"ome-%s.org"</span> module))
                                ome-dir)))
    <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">ensure el-get-sources is empty before loading "ome-.+\.org" files</span>
    (setq el-get-sources nil)
    <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">enable git shallow clone to save time and bandwidth</span>
    (setq el-get-git-shallow-clone t)

    (<span style="color: #b5bd68;">if</span> header-or-tags
        (<span style="color: #b5bd68;">dolist</span> (header-or-tag header-or-tags)
          (<span style="color: #b5bd68;">let*</span> ((base (file-name-nondirectory file))
                 (dir  (file-name-directory file))
                 (partial-file (expand-file-name
                                (concat <span style="color: #8abeb7;">"."</span> (file-name-sans-extension base)
                                        <span style="color: #8abeb7;">".part."</span> header-or-tag <span style="color: #8abeb7;">".org"</span>)
                                dir)))
            (<span style="color: #b5bd68;">unless</span> (file-exists-p partial-file)
              (<span style="color: #b5bd68;">with-temp-file</span> partial-file
                (insert
                 (<span style="color: #b5bd68;">with-temp-buffer</span>
                   (insert-file-contents file)
                   (<span style="color: #b5bd68;">save-excursion</span>
                     (<span style="color: #b5bd68;">condition-case</span> nil <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">collect as a header</span>
                         (<span style="color: #b5bd68;">progn</span>
                           (org-link-search (concat <span style="color: #8abeb7;">"#"</span> header-or-tag))
                           (org-narrow-to-subtree)
                           (buffer-string))
                       (<span style="color: #cc6666; font-weight: bold;">error</span> <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">collect all entries with as tags</span>
                        (<span style="color: #b5bd68;">let</span> (body)
                          (org-map-entries
                           (<span style="color: #b5bd68;">lambda</span> ()
                             (<span style="color: #b5bd68;">save-restriction</span>
                               (org-narrow-to-subtree)
                               (setq body (concat body <span style="color: #8abeb7;">"\n"</span> (buffer-string)))))
                           header-or-tag)
                          body))))))))
            (org-babel-load-file partial-file)))
      (org-babel-load-file file))

    (el-get 'sync (mapcar 'el-get-source-name el-get-sources))
    (setq ome-module-packages nil)
    (mapcar (<span style="color: #b5bd68;">lambda</span> (el-get-package)
              (add-to-list 'ome-module-packages
                           (el-get-source-name el-get-package)))
            el-get-sources)
    (add-to-list 'ome-packages
                 (cons module-name ome-module-packages))))
</pre>
</div>

<ul class="org-ul">
<li>Functions for installing el-get packages
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp" id="ome-install">(<span style="color: #b5bd68;">defun</span> <span style="color: #de935f;">ome-install</span> (el-get-package)
  <span style="color: #b294bb;">"Add EL-GET-PACKAGE to `</span><span style="color: #81a2be;">el-get-sources</span><span style="color: #b294bb;">'.</span>

<span style="color: #b294bb;">This package will be installed when `</span><span style="color: #81a2be;">ome-load</span><span style="color: #b294bb;">'. Users can make</span>
<span style="color: #b294bb;">his own customization by providing a \"ome-package-name-setup\"</span>
<span style="color: #b294bb;">function."</span>
  (<span style="color: #b5bd68;">let</span> ((ome-package-setup-func
         (intern
          (concat <span style="color: #8abeb7;">"ome-"</span>
                  (el-get-as-string el-get-package)
                  <span style="color: #8abeb7;">"-setup"</span>))))
    (<span style="color: #b5bd68;">if</span> (fboundp ome-package-setup-func)
        (add-to-list 'el-get-sources
                     `(<span style="color: #b294bb;">:name</span> ,el-get-package
                             <span style="color: #b294bb;">:after</span> (<span style="color: #b5bd68;">progn</span>
                                      (,ome-package-setup-func))))
      (add-to-list 'el-get-sources
                   `(<span style="color: #b294bb;">:name</span> ,el-get-package)))))
</pre>
</div>

<ul class="org-ul">
<li>Functions for getting information about el-get packages installed by
oh-my-emacs.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-emacs-lisp" id="ome-packages">(<span style="color: #b5bd68;">defun</span> <span style="color: #de935f;">ome-try-get-package-website</span> (package)
  <span style="color: #b294bb;">"el-get's package recipe has multiple type, some contains</span>
<span style="color: #b294bb;">a :website, some contains just a :url, while some github package</span>
<span style="color: #b294bb;">just contains a :pkgname. This function try to get a proper</span>
<span style="color: #b294bb;">website link for an el-get package."</span>
  (<span style="color: #b5bd68;">let</span> ((package-def (el-get-package-def package)))
    (or (plist-get package-def <span style="color: #b294bb;">:website</span>)
        (and (eq (plist-get package-def <span style="color: #b294bb;">:type</span>) 'github)
             (concat <span style="color: #8abeb7;">"https://github.com/"</span>
                     (plist-get package-def <span style="color: #b294bb;">:pkgname</span>)))
        (plist-get package-def <span style="color: #b294bb;">:url</span>))))

(<span style="color: #b5bd68;">defun</span> <span style="color: #de935f;">ome-try-get-package-description</span> (package)
  <span style="color: #b294bb;">"This function try to get a proper description for an el-get</span>
<span style="color: #b294bb;">package from its recipe. Note that some package's description has</span>
<span style="color: #b294bb;">multiple lines, so we need to join them together for better</span>
<span style="color: #b294bb;">auto-fill."</span>
  (<span style="color: #b5bd68;">let</span> ((package-def (el-get-package-def package)))
    (replace-regexp-in-string <span style="color: #8abeb7;">"</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">(</span><span style="color: #8abeb7;">\n</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">|</span><span style="color: #8abeb7;">\\ </span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">)</span><span style="color: #8abeb7;">+"</span> <span style="color: #8abeb7;">" "</span>
                              (plist-get package-def <span style="color: #b294bb;">:description</span>))))

(<span style="color: #b5bd68;">defun</span> <span style="color: #de935f;">ome-package-list-to-org-table</span> ()
  (interactive)
  (setq ome-packages (sort ome-packages
                           #'(<span style="color: #b5bd68;">lambda</span> (x y) (string&lt; (car x) (car y)))))
  (<span style="color: #b5bd68;">let</span> ((org-table-line-template <span style="color: #8abeb7;">"|%s|[[%s][%s]]|%s|\n"</span>))
    (<span style="color: #b5bd68;">with-temp-buffer</span>
      (insert <span style="color: #8abeb7;">"| Module | Package | Description |\n"</span>)
      (insert <span style="color: #8abeb7;">"|--------+---------+-------------|\n"</span>)
      (insert <span style="color: #8abeb7;">""</span>)
      (<span style="color: #b5bd68;">dolist</span> (module-packages ome-packages)
        (setq package-index 0)
        (<span style="color: #b5bd68;">dolist</span> (package (cdr module-packages))
          (insert (format org-table-line-template
                          (<span style="color: #b5bd68;">if</span> (= package-index 0)
                              (car module-packages)
                            <span style="color: #8abeb7;">""</span>)
                          (ome-try-get-package-website package)
                          package
                          (ome-try-get-package-description package)))
          (incf package-index)))
      (buffer-string))))
</pre>
</div>
</div>
</div>

<div id="outline-container-core" class="outline-3">
<h3 id="core"><a id="sec"></a>oh-my-emacs core functions</h3>
<div class="outline-text-3" id="text-core">
<div class="org-src-container">

<pre class="src src-emacs-lisp" id="core">(add-to-list 'el-get-sources
             '(<span style="color: #b294bb;">:name</span> cl-lib))

(<span style="color: #b5bd68;">defun</span> <span style="color: #de935f;">ome-start-or-switch-to</span> (function buffer-name)
  <span style="color: #b294bb;">"Invoke FUNCTION if there is no buffer with BUFFER-NAME.</span>
<span style="color: #b294bb;">  Otherwise switch to the buffer named BUFFER-NAME.  Don't clobber</span>
<span style="color: #b294bb;">  the current buffer."</span>
  (<span style="color: #b5bd68;">if</span> (not (get-buffer buffer-name))
      (<span style="color: #b5bd68;">progn</span>
        (split-window-sensibly (selected-window))
        (other-window 1)
        (funcall function))
    (switch-to-buffer-other-window buffer-name)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">Writing Portable Emacs Lisp Configurations</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>Use <code>executable-find</code> to set path to external tools instead of by writing the
tool full path by hand.
</li>
<li>Check necessary external tools before require a package if a package do need
that tool.
</li>
<li>Try your best to avoid binding keys to function keys since some function keys
are easy be conflicted with system keys, and some keyboard do not have
function keys at all, such as HHKB.
</li>
<li>Narrow you variable definition scope, for example, use <code>define-key</code> with a
mode map instead of <code>global-set-key</code>, and you'd better set mode related keys
within the mode hook.
</li>
<li>Try to use system tools to get necessary configuration, for example, you can
use <code>pkg-config</code> to get necessary header file paths for a particular lib,
this is useful for settings with <code>auto-complete-clang</code>.
</li>
<li>Emacs cannot do all things, it do need some external tools to facilitate its
jobs. For example, <code>semantic</code> from <code>cedet</code> is a bad idea, it's bloated, slow
and buggy. Consider using clang/jedi for completion. If there is a better
external tools, do not hesitate, just use it. Do not reinvent the same wheel
in emacs lisp, all you need to do is integrate that tool to emacs with an emacs
interface.
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-" class="outline-2">
<h2 id="sec-">Load settings</h2>
<div class="outline-text-2" id="text-4">
<p>
Files in oh-my-emacs <code>core</code> will be loaded by default:
</p>
<ul class="org-ul">
<li><a href="core/ome-auto-mode.html">ome-auto-mode.org</a>: small and convenient settings for some minor mode package.
</li>
<li><a href="core/ome-basic.html">ome-basic.org</a>: basic settings, such as tab, space, auto-fill-mode, flyspell,
</li>
<li><a href="core/ome-completion.html">ome-completion.org</a>: main settings for completion support.
</li>
<li><a href="core/ome-gui.html">ome-gui.org</a>: settings for color theme, font, modeline, scrollbar, etc.
etc.
</li>
<li><a href="core/ome-keybindings.html">ome-keybindings.org</a>: oh-my-emacs keybindings.
</li>
<li><a href="core/ome-miscs.html">ome-miscs.org</a>: misc settings such as <code>magit</code>, <code>smartparens</code>, <code>projectile</code>,
etc.
</li>
<li><a href="core/ome-org.html">ome-org.org</a>: some refinement for org-mode.
</li>
<li><a href="core/ome-writing.html">ome-writing.org</a>: for writers, bloggers, only contains <code>markdown-mode</code> for
now.
</li>
<li><a href="core/ome-advanced.html">ome-advanced.org</a>: contains <code>evil</code>, <code>ace-jump-mode</code>, <code>ack-and-a-half</code>, etc.
</li>
</ul>

<p>
Files in oh-my-emacs <code>modules</code> is optional, you can load necessary one when
you really need it.
</p>
<ul class="org-ul">
<li><a href="modules/ome-cc.html">ome-cc.org</a>: main settings for <code>cc-mode</code>.
</li>
<li><a href="modules/ome-common-lisp.html">ome-common-lisp.org</a>: settings for Common Lisp, mainly <a href="http://common-lisp.net/project/slime/">SLIME</a>.
</li>
<li><a href="modules/ome-clojure.html">ome-clojure.org</a>: settings for Clojure.
</li>
<li><a href="modules/ome-emacs-lisp.html">ome-emacs-lisp.org</a>: settings for emacs-lisp.
</li>
<li><a href="modules/ome-java.html">ome-java.org</a>: settings for Java, using <a href="https://github.com/senny/emacs-eclim">emacs-eclim</a>.
</li>
<li><a href="modules/ome-javascript.html">ome-javascript.org</a>: settings for JavaScript, not perfect now.
</li>
<li><a href="modules/ome-python.html">ome-python.org</a>: python settings, life is short, <code>elpy</code> is amazing.
</li>
<li><a href="modules/ome-ruby.html">ome-ruby.org</a>: Ruby support including <code>inf-ruby</code> and by <code>smartparens-ruby</code>.
</li>
<li><a href="modules/ome-scheme.html">ome-scheme.org</a>: settings for Scheme.
</li>
<li><a href="modules/ome-ocaml.html">ome-ocaml.org</a>: minimal settings for OCaml.
</li>
<li><a href="modules/ome-tex.html">ome-tex.org</a>: AUCTeX and CDLaTeX for \TeX{} editing.
</li>
<li><a href="modules/ome-web.html">ome-web.org</a>: settings for HTML/CSS web development.
</li>
<li><a href="modules/ome-experimental.html">ome-experimental.org</a>: some experimental packages, such as sppedbar, minimap,
etc. Not stable yet now.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp" id="load-various-ome-files">(ome-load <span style="color: #8abeb7;">"core/ome-auto-mode.org"</span>)
(ome-load <span style="color: #8abeb7;">"core/ome-basic.org"</span>)
(ome-load <span style="color: #8abeb7;">"core/ome-completion.org"</span>)
(ome-load <span style="color: #8abeb7;">"core/ome-gui.org"</span>)
(ome-load <span style="color: #8abeb7;">"core/ome-keybindings.org"</span>)
(ome-load <span style="color: #8abeb7;">"core/ome-miscs.org"</span>)
(ome-load <span style="color: #8abeb7;">"core/ome-org.org"</span>)
(ome-load <span style="color: #8abeb7;">"core/ome-writing.org"</span>)
(ome-load <span style="color: #8abeb7;">"core/ome-advanced.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-cc.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-java.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-emacs-lisp.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-common-lisp.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-clojure.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-scheme.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-python.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-ruby.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-ocaml.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-tex.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-web.org"</span>)
(ome-load <span style="color: #8abeb7;">"modules/ome-experimental.org"</span> <span style="color: #8abeb7;">"smooth-scrolling"</span> <span style="color: #8abeb7;">"sublimity"</span>)
</pre>
</div>
</div>

<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">Load User/System Specific Files</h3>
<div class="outline-text-3" id="text-4-1">
</div><div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">How to disable an el-get package?</h4>
<div class="outline-text-4" id="text-4-1-1">
<p>
To modify ome itself, you need to know something about <a href="http://orgmode.org/worg/org-contrib/babel/intro.html#literate-programming">org-babel</a>. In general,
all ome packages are loaded in a org-mode's code block, the general format of
which is:
</p>

<p class="verse">
#+NAME: &lt;name&gt;<br  />
#+BEGIN_SRC &lt;language&gt; &lt;switches&gt; &lt;header arguments&gt;<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&lt;body&gt;<br  />
#+END_SRC<br  />
</p>

<p>
The <a href="http://orgmode.org/manual/Header-arguments.html#Header-arguments">header arguments</a> can control things like whether code is executed when
<code>org-babel-load-file</code>, or exported when <code>org-export-xxxx</code>. If you want to
disable a code block in <code>org-babel-load-file</code>, you should use the <a href="http://orgmode.org/manual/tangle.html#tangle">:tangle</a>
header argument by settings it to <code>:tangle no</code>. Thus this code block will not
be tangled by org-babel and ome won't execute this code block when starts.
</p>

<p>
For example, here's a general code block for package-abc:
</p>

<p class="verse">
#+BEGIN_SRC emacs-lisp<br  />
(defun ome-package-abc-setup ()<br  />
&#xa0;&#xa0;;; some custom code for package-abc<br  />
&#xa0;&#xa0;)<br  />
<br  />
(ome-install 'package-abc)<br  />
#+END_SRC<br  />
</p>

<p>
If you want to disable package-abc, you just add a <code>:tangle no</code> to this code
block:
</p>

<p class="verse">
#+BEGIN_SRC emacs-lisp :tangle no<br  />
(defun ome-package-abc-setup ()<br  />
&#xa0;&#xa0;;; some custom code for package-abc<br  />
&#xa0;&#xa0;)<br  />
<br  />
(ome-install 'package-abc)<br  />
#+END_SRC<br  />
</p>

<p>
Although you disabled package-abs'c code block, package-abs still keep
installed in your emacs. Sometimes, you even want to disable this package from
the bottom. Then you should first remove package-abc via <code>el-get-remove
package-abc</code>, and add <code>:tangle no</code> to that code block.
</p>
</div>
</div>

<div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">General custom code</h4>
<div class="outline-text-4" id="text-4-1-2">
<p>
Ome push some small code snippets to <code>custom.el</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp" id="m-x-customize-customizations">(setq custom-file (concat ome-dir <span style="color: #8abeb7;">"custom.el"</span>))
(load custom-file 'noerror)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">System/User specific customizations</h4>
<div class="outline-text-4" id="text-4-1-3">
<p>
You can keep system- or user-specific customizations here in either raw
emacs-lisp files or as embedded elisp in org-mode files (as done in this
document).
</p>

<p>
You can keep elisp source in the <code>src</code> directory. Packages loaded from here
will override those installed by ELPA.  This is useful if you want to track the
development versions of a project, or if a project is not in elpa.
</p>

<p>
For example, if your username is <code>testuser</code>, then you can put a <code>testuser.el</code>
file in your <code>$HOME/.emacs.d</code>, and then put anything you like in
<code>testuser.el</code>. You may wonder what's the difference between ome's <code>custom.el</code>
and <code>testuser.el</code>. Actually, <code>custom.el</code> is ome's own code snippets, while
<code>testuser.el</code> is your own code snippet and no need to <code>git add testuser.el</code>. So
you can keep sync with upstream while keep your own customizations.
</p>

<p>
After we've loaded all the oh-my-emacs defaults, lets load the user's stuff.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp" id="ome-load-files">(flet ((sk-load (base)
         (<span style="color: #b5bd68;">let*</span> ((path          (expand-file-name base ome-dir))
                (literate      (concat path <span style="color: #8abeb7;">".org"</span>))
                (encrypted-org (concat path <span style="color: #8abeb7;">".org.gpg"</span>))
                (plain         (concat path <span style="color: #8abeb7;">".el"</span>))
                (encrypted-el  (concat path <span style="color: #8abeb7;">".el.gpg"</span>)))
           (<span style="color: #b5bd68;">cond</span>
            ((file-exists-p encrypted-org) (org-babel-load-file encrypted-org))
            ((file-exists-p encrypted-el)  (load encrypted-el))
            ((file-exists-p literate)      (org-babel-load-file literate))
            ((file-exists-p plain)         (load plain)))))
       (remove-extension (name)
         (string-match <span style="color: #8abeb7;">"</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">(</span><span style="color: #8abeb7;">.*?</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">)</span><span style="color: #8abeb7;">\.</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">(</span><span style="color: #8abeb7;">org</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">(</span><span style="color: #8abeb7;">\\.el</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">)</span><span style="color: #8abeb7;">?</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">|</span><span style="color: #8abeb7;">el</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">)</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">(</span><span style="color: #8abeb7;">\\.gpg</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">)</span><span style="color: #8abeb7;">?$"</span> name)
         (match-string 1 name)))
  (<span style="color: #b5bd68;">let</span> ((elisp-dir (expand-file-name <span style="color: #8abeb7;">"src"</span> ome-dir))
        (user-dir (expand-file-name user-login-name ome-dir)))
    <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">add the src directory to the load path</span>
    (add-to-list 'load-path elisp-dir)
    <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">load specific files</span>
    (<span style="color: #b5bd68;">when</span> (file-exists-p elisp-dir)
      (<span style="color: #b5bd68;">let</span> ((default-directory elisp-dir))
        (normal-top-level-add-subdirs-to-load-path)))
    <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">load system-specific config</span>
    (sk-load system-name)
    <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">load user-specific config</span>
    (sk-load user-login-name)
    <span style="color: #969896; font-style: italic;">;; </span><span style="color: #969896; font-style: italic;">load any files in the user's directory</span>
    (<span style="color: #b5bd68;">when</span> (file-exists-p user-dir)
      (add-to-list 'load-path user-dir)
      (mapc #'sk-load
            (remove-duplicates
             (mapcar #'remove-extension
                     (directory-files user-dir t <span style="color: #8abeb7;">".*\.</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">(</span><span style="color: #8abeb7;">org</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">|</span><span style="color: #8abeb7;">el</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">)</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">(</span><span style="color: #8abeb7;">\\.gpg</span><span style="color: #f0c674;">\\</span><span style="color: #b294bb;">)</span><span style="color: #8abeb7;">?$"</span>))
             <span style="color: #b294bb;">:test</span> #'string=)))))
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-" class="outline-2">
<h2 id="sec-">Todo</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">Blueprint</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>Add functions to rollback el-get. For example, users may have different
environments, which may result in a failure of one oh-my-emacs module A. Thus
users may want to remove all the packages installed by module A. So maybe I
need a function <code>(ome-unload "ome-module-A.org")</code>, which just remove all
oh-my-emacs by calling <code>el-get-remove</code>, and rollback the user's .emacs.d to
a previous workable state(hope).
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">Boot up speed optimization</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li>Use <code>eval-after-load</code> when possible to improve the boot up speed.
</li>
<li><code>autoload</code> for lazy loading?
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">El-get</h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li>Investigate whether or not <code>el-get-remove</code> will remove all packages that
depends on the removed package, if not, how to solve this problem?
</li>
<li>Investigate more on <code>el-get</code> to know how to reinitialize a package without
need to <code>el-get-remove</code> then <code>el-get-install</code> if just <code>:after</code> changes a
little. This is really a big problem.
</li>
<li>Seems that you can write <code>depends</code> in ome <code>el-get-sources</code>, why?
</li>
<li>When you <code>el-get-update</code>, <code>el-get</code> will first <code>el-get-remove</code> then
<code>el-get-install</code>, any way to just do things like <code>git pull</code> instead of <code>git
  clone</code> from the beginning?
</li>
</ul>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
If you already have a directory at <code>~/.emacs.d</code> move it out of the way and
put this there instead. Or you can make a symbolic link.
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: SunWenxiang</p>
<p class="date">Created: 2014-08-05 Tue 22:50</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.92.1 (<a href="http://orgmode.org">Org</a> mode )</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
